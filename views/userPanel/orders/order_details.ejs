<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../../partials/head.ejs') %>
</head>
<body> 
      <%- include('../../partials/nav.ejs') %>
      <%- include('../../partials/bootstrap.ejs') %>
      <div class="container">
        <div class="row bordered">
            <div class="col-lg-12">
                <h1><strong><i class="bi bi-basket" style="color:#0275d8"></i> Moje zakupy</strong></h1>
            </div>
        </div>
        <div class="row m-3">
            <div class="col-lg-12">
                <a href="/user/orders"><i class="bi bi-arrow-left"></i> Powrót do listy</a>
            </div>
        </div>
        <div class="row mt-3" style="border:1px solid #ddd">
            <div class="col-lg-12 p-3 gradient" >
                <h1 class="book-title text-white" ><strong>Zamówienie z dnia </strong><%= order.Data_zakupu %><strong> nr <%= order.id %></strong>  </h1>
            </div>
           
        </div>
        <div class="row p-4">
            <div class="col-lg-3 order_section_info">
                <h1 class="book-title">Metoda dostawy</h1>
                <div class="book-meta px-2">
                    <span style="font-size: 14px; color: #555; font-weight: 500;"><%= order['Metoda dostawy'] %></span>
                </div>
            </div>
    
            <!-- Invoice Data Section -->
            <div class="col-lg-3 order_section_info">
                <h1 class="book-title">Dane do faktury</h1>
                <div class="book-meta mt-3 px-3 py-2" style="border-top: 1px solid #ddd;">
                    <% Object.keys(address).forEach(item => { %>
                        <% if(item !== 'usuniety'){ %>
                            <span style="font-size: 13px; display: block; line-height: 1.5; color: #555;"><%= address[item] %></span>
                        <%}%>
                    <% }) %>
                </div>
            </div>
    
            <!-- Payment Method Section -->
            <div class="col-lg-3 order_section_info">
                <h1 class="book-title">Metoda płatności</h1>
                <div class="book-meta px-2">
                    <span style="font-size: 14px; color: #555; font-weight: 500;"><%= order['Metoda płatności'] %></span>
                </div>
            </div>
        </div>
        <div class="row"  >
            <div class="col-lg-12" style="border:1px solid #ddd;">
                <div class="d-flex p-3" style="justify-content: space-between;border-bottom:1px solid #ddd;">
                    <span>Zakupione produkty</span>
                    <div class="d-flex" style="gap: 70px;">
                        <span> Ilość </span>
                        <span> Wartość </span>
                    </div>
                </div>
                <% order.Przedmioty.forEach(el => { %>
                    <div class="col-lg-12" style="border-bottom:1px solid #ddd;" >
                    <div class="d-flex px-4" style="justify-content: space-between; width:100%">
                        <div style="width: 50%;" class="d-flex">
                          <div style="width: 200px;">
                          <img src="/book.jpg" class="book-image" style="border: none;"/>  
                          
                        </div>
                        <div class="py-5">
                            <h1 class="book-title"><%= el.Tytuł %></h1>
                            <div class="book-meta">
                                <span style="border-bottom: 1px solid #ddd;" class="my-2 pb-2"><%= el.Autor %></span>
                                <a href="user/account/add_opinions">Dodaj recenzje</a>
                            </div>
                           
                        </div>  
                        </div>
                        
                        
                        
                            
                            <div class="d-flex pt-5 text-end" style="gap: 70px;">
                                <span><b><%= el.quantity %> szt</b> </span>
                                <span><b><%= el.Cena %>zł</b>  </span>
                            </div>
                       
                    </div>
                </div>
                    <%})%>
                    <div class="col-lg-12 d-flex text-end" style="align-items:end;">
                        <div class="d-flex p-3" style="justify-content: end; width:100%; gap:10px;">
                            <span class="book-title">Razem zapłacono:</span>
                            <span class="book-title"><%= order.Zapłacona_kwota %> zł</span>
                        </div>
                        
                    </div>
            </div>

        </div>

      </div>
      <%- include('../../partials/bootstrap.ejs') %>
</body>
</html>

<style>
    .order_section_info {
        margin: 10px;
        padding: 20px;
        border: 1px solid #ddd;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    /* Styling for Section Titles */
    .order_section_info h1.book-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 15px;
    }

    /* Meta data inside sections */
    .book-meta {
        font-size: 13px;
        color: #666;
    }

    .book-meta span {
        display: block;
        margin-bottom: 5px;
        line-height: 1.5;
    }

    /* Hover effect for section cards */
    .order_section_info:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        transform: translateY(-3px);
    }
</style>